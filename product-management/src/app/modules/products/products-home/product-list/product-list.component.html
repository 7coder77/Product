<!-- Navbar Section -->
<!-- Toolbar Section -->

<div class="filter-bar d-flex align-items-center px-2 py-2 bg-dark text-light" style="gap: 10px;">
  <button class="btn text-light p-0 me-2 fw-normal border-right border-2 px-3" (click)="onBack()">
    <span class="me-1 text-green fs-4 ">&laquo;</span>Back
  </button>
  <!-- <span class="fw-bold">|</span> -->
  <span class="me-3 border-right" style="padding-right:12px;">Create and Manage Product</span>

  <div class="form-check form-switch me-3">
    <input class="form-check-input" type="checkbox" id="switchCheckChecked" checked />
    <label class="form-check-label small fw-bold" for="switchCheckChecked" style="color:#18e0d3">With Demand Forecast</label>
  </div>

  <!-- Search Bar -->
  <div class="input-group input-group-sm me-2" style="max-width:175px;">
    <input type="text" class="form-control bg-dark text-light border-secondary" placeholder="Search" aria-label="Search" aria-describedby="basic-addon1" [(ngModel)]="search" />
    <span class="input-group-text bg-transparent border-secondary" id="basic-addon1" (click)="searchProduct()">
      <mat-icon style="color:#18e0d3;" class="fs-6">search</mat-icon>
    </span>
  </div>

  <span class="me-1">Category:</span>
  <select class="form-select form-select-sm me-2 bg-dark text-light border-secondary" style="width:auto;" [(ngModel)]="categoryFilter">
    <option *ngFor="let item of categories">{{item}}</option>
  </select>

  <button class="btn btn-outline-secondary btn-sm me-2 d-flex align-items-center" (click)="applyFilter()">
    <mat-icon class="fs-6 mt-1">filter_alt</mat-icon>Filter
  </button>

  <button class="btn btn-info btn-sm me-2 d-flex align-items-center bg-green text-dark" (click)="onAddProduct()">
    <mat-icon class="fs-6 mt-1">add</mat-icon>Add New Product
  </button>

  <button class="btn btn-dark btn-sm d-flex align-items-center" [ngClass]="{'border-1':selection.selected.length > 0}" [disabled]="selection.selected.length === 0" style="background:#2b2b2b;" (click)="onForecast()">
    <mat-icon class="fs-6 mt-1">calculate</mat-icon>Demand Forecast
  </button>

  <button class="btn btn-info btn-sm me-2 d-flex align-items-center bg-green text-dark" [disabled]="selection.selected.length != 1" (click)="onAddSales()">
    <mat-icon class="fs-6 mt-1">bar_chart</mat-icon>Add sales
  </button>

</div>

<div class="container-fluid mt-3">

<table mat-table [dataSource]="dataSource" class="mat-elevation-z8 custom-mat-table">

  <!-- Checkbox Column -->
  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">
      <mat-checkbox
      color="Primary"
        (change)="masterToggle()"
        [checked]="isAllSelected()"
        [indeterminate]="selection.hasValue() && !isAllSelected()">
      </mat-checkbox>
    </th>
    <td mat-cell *matCellDef="let row">
      <mat-checkbox
      color="Primary"
        (click)="$event.stopPropagation()"
        (change)="$event ? selection.toggle(row) : null"
        [checked]="selection.isSelected(row)">
      </mat-checkbox>
    </td>
  </ng-container>

  <!-- Product Name -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Product Name</th>
    <td mat-cell *matCellDef="let row">{{row.name}}</td>
  </ng-container>

  <!-- Product Category -->
  <ng-container matColumnDef="category">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Product Category</th>
    <td mat-cell *matCellDef="let row">{{row.category}}</td>
  </ng-container>

  <!-- Cost Price -->
  <ng-container matColumnDef="cost">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Cost Price</th>
    <td mat-cell *matCellDef="let row">$ {{row.cost_price}}</td>
  </ng-container>

  <!-- Selling Price -->
  <ng-container matColumnDef="selling">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Selling Price</th>
    <td mat-cell *matCellDef="let row">$ {{row.selling_price}}</td>
  </ng-container>

  <!-- Description -->
  <ng-container matColumnDef="desc">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Description</th>
    <td mat-cell *matCellDef="let row">{{row.description}}</td>
  </ng-container>

  <!-- Available Stock -->
  <ng-container matColumnDef="stock">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Available Stock</th>
    <td mat-cell *matCellDef="let row">{{row.stock}}</td>
  </ng-container>

  <!-- Units Sold -->
  <ng-container matColumnDef="sold">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Units Sold</th>
    <td mat-cell *matCellDef="let row">{{row.sold}}</td>
  </ng-container>

  <!-- Actions Column -->
  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef class="bg-dark text-light">Action</th>
    <td mat-cell *matCellDef="let row">
      <button mat-icon-button aria-label="View"><mat-icon>visibility</mat-icon></button>
      <button mat-icon-button aria-label="Edit" (click)="editRow(row)"><mat-icon>edit</mat-icon></button>
      <button mat-icon-button color="warn" aria-label="Delete" (click)="deleteRow(row)"><mat-icon>delete</mat-icon></button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>


</div>
